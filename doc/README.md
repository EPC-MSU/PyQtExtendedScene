# PyQtExtendedScene

## Описание модуля

* **doc** - папка с описанием модуля.
* **examples** - папка с примерами.

* **PyQtExtendedScene** - папка с модулем.
    * **basecomponent.py** - файл с базовым классом **BaseComponent** для компонентов.
    * **componentgroup.py** - файл с классом **ComponentGroup** для составных компонентов.
    * **extendedscene.py** - файл с основным виджетом/сценой **ExtendedScene** для рисования компонентов.
    * **pointcomponent.py** - файл с классом **PointComponent** компонента, который представляет собой точку.
    * **rectcomponent.py** - файл с классом **RectComponent** компонента, который представляет собой прямоугольник.
    * **scenemode.py** - файл с перечислением режимов **SceneMode**, в которых может находиться сцена.
    * **sender.py** - файл с вспомогательным классом для отправки Qt-сигналов. 
    * **utils.py** - файл с мелкими функциями.
* **scripts** - папка со скриптами для выпуска релиза.
* **tests** - тесты.

## Общее описание
### Типы компонентов
В **PyQtExtendedScene** есть компоненты следующих типов:
* **PointComponent** - точка.
* **RectComponent** - прямоугольник.
* **ComponentGroup** - составной компонент.

Составной компонент может включать в себя прямоугольники и точки.

Компонентам можно задать следующие атрибуты, которые влияют на поведение компонентов в обычном режиме (о режимех работы написано ниже):

* **draggable** - компонент можно перемещать в обычном режиме.
* **selectable** - компонент можно выбирать в обычном режиме.
* **unique_selection** - компонент может быть выбран только единолично.

В режимах редактирования все компоненты можно перемещать и выбирать.

### Режимы
Виджет **ExtendedScene** может находиться в одном из режимов:
* **NO_ACTION** - обычный режим.
* **EDIT** - режим редактирования.
* **EDIT_GROUP** - режим редактирования составного компонента.

#### Обычный режим
По умолчанию сцена находиться в обычном режиме. Для перехода в обычный режим нужно вызвать метод:

```python
scene.set_scene_mode(SceneMode.NORMAL)
```

В обычном режиме можно:
* Создавать объекты программно.
* Перетаскивать сцену зажатой **ЛЕВОЙ** кнопкой мышки.
* Выделять объекты зажатой **ПРАВОЙ** кнопкой мышки.
* Выделять объект кликом **ЛЕВОЙ** кнопкой мышки по объекту.
* Зумировать сцену колесиком мышки.
* Копировать объекты.

#### Режим редактирования
Для перехода в режим редактирования нужно вызвать метод:

```python
scene.set_scene_mode(SceneMode.EDIT)
```

В режиме редактирования можно:
* Рисовать точку кликом **ПРАВОЙ** кнопки мышки и нажатой клавише SHIFT.
* Рисовать прямоугольик зажатой **ПРАВОЙ** кнопкой мышки.
* Перетаскивать точку, прямоугольник, составной компонент зажатой **ЛЕВОЙ** кнопкой мышки при наведении мышки внутрь соответствующего объекта. Если перетаскиваемые точка или прямоугольник находятся в составном компоненте, то составной компонент перетаскивается целиком.
* Изменять размеры прямоугольника, который не находится в составном компоненте. Для этого нужно навести мышку на границу прямоугольника и зажать **ЛЕВУЮ** кнопку мышки.

#### Режим редактирования составного компонента

Для перехода в режим редактирования составного компонента нужно выделить составной компонент и вызвать метод:

```python
scene.set_scene_mode(SceneMode.EDIT_GROUP)
```

В режиме редактирования составного компонента можно:

* Перетаскивать точку, прямоугольник, находящиеся внутри составного компонента. Для этого нужно навести мышку внутрь точки/прямоугольника и зажать **ЛЕВУЮ** кнопку мышки.
* Изменять размеры прямоугольника, который находится внутри составного компонента. Для этого нужно навести мышку на границу прямоугольника и зажать **ЛЕВУЮ** кнопку мышки.